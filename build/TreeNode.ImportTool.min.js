/*! TreeNode 2013-06-30 */
!function(a){"use strict";function b(a,b){b[a[1]]=b[a[0]].Add({parent:a[0],id:a[1],text:a[2],page_id:a[3]?a[1]:null})}a.ImportFromSelfRef=function(c){var d,e,f,g=[],h={};if(c){c=c.split("\n"),e=c[0].split("	"),d=a.CreateRoot({parent:e[0],id:e[1],text:e[2],page_id:e[3]?e[1]:null}),h[e[1]]=d;for(var i=1,j=c.length;j>i;i++)f=c[i].split("	"),f[0]&&(h[f[0]]?(b(f,h),g.length&&h[g[0][0]]&&b(g.shift(),h)):g.push(f));return d}}}(this.TreeNode),function(a){"use strict";a.ImportFromLftRgt=function(b){var c,d,e,f;if(b){b=b.split("\n");for(var g=0,h=b.length;h>g;g++)if(e=b[g].split("	"),f={id:e[0],text:e[1],lft:e[2],rgt:e[3],url:"NULL"===e[5]?null:e[5],page_id:"NULL"===e[4]?null:e[4]},c){for(;e[2]>parseInt(c.Payload().rgt,10);)c=c.Parent();c=c.Add(f)}else c=a.CreateRoot(f),d=c}return d}}(this.TreeNode),function(a){"use strict";function b(a,c){var d="\n(",e=")";a.rows.push(d+["'"+c.Payload().text+"'",c.Lft,c.Rgt,c.Payload().page_id||"NULL",c.Payload().url||"NULL"].join(",")+e);for(var f=0,g=c.Children().length;g>f;f++)b(a,c.Children(f))}a.prototype.ExportInserts=function(b){return b=b||{},b.context=this,new a.InsertWriter(b)},a.InsertWriter=function(c){if(!(this instanceof a.InsertWriter))return new a.InsertWriter(c);var d,e=c.context,f="INSERT INTO `nav` (`name`, `lft`, `rgt`, `page_id`, `url`)\nVALUES",g=";";return this.Statement=function(){return d},this.Context=function(){return e},void 0===e.Lft&&e.Decorate("LftRgt"),this.rows=[],b(this,this.Context()),d=f+this.rows.join(",")+g,this}}(this.TreeNode);